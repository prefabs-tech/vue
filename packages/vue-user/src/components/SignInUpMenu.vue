<template>
  <ResponsiveMenu :routes="routes" @change-route="$emit('select:menu')" />
</template>

<script lang="ts">
export default {
  name: "SignInUpMenu",
};
</script>

<script setup lang="ts">
import { useConfig } from "@prefabs.tech/vue3-config";
import { useI18n } from "@prefabs.tech/vue3-i18n";
import { ResponsiveMenu } from "@prefabs.tech/vue3-ui";
import { computed } from "vue";

import { useTranslations } from "../index";

import type { AppConfig } from "@prefabs.tech/vue3-config";

defineEmits<{
  (e: "select:menu"): void;
}>();

const config = useConfig() as AppConfig;

const messages = useTranslations();

const { t } = useI18n({ messages });

const signUpRoute = {
  name: t("user.menu.signup"),
  route: "signup",
};

const loginRoute = {
  name: t("user.menu.signin"),
  route: "login",
};

const routes = computed(() => {
  if (config?.user?.routes?.signup.disabled) {
    return [loginRoute];
  }

  return [loginRoute, signUpRoute];
});
</script>
